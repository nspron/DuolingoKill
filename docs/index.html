<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多领国杀手设备使用统计</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="http://raw.githack.com/nspron/DuolingoKill/main/docs/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>多领国杀手设备使用统计</h1>
            <p class="subtitle">详细记录设备使用情况和行为模式</p>
            <button id="themeToggle" class="theme-toggle">🌙 暗黑模式</button>
        </header>
        
        <div class="filters">
            <div class="filter-group">
                <label class="filter-label">日期范围</label>
                <select id="dateRange">
                    <option value="7">最近7天</option>
                    <option value="30" selected>最近30天</option>
                    <option value="90">最近90天</option>
                    <option value="all">全部数据</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">设备型号</label>
                <select id="deviceModel">
                    <option value="all">全部型号</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">Android版本</label>
                <select id="androidVersion">
                    <option value="all">全部版本</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">搜索设备ID</label>
                <input type="text" id="deviceSearch" placeholder="输入设备ID">
            </div>
            
            <div class="filter-group">
                <label class="filter-label">搜索IP地址</label>
                <input type="text" id="ipSearch" placeholder="输入IP地址">
            </div>
            
            <div class="filter-group">
                <label class="filter-label">国家筛选</label>
                <select id="countryFilter">
                    <option value="all">全部国家</option>
                </select>
            </div>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">总开启次数</span>
                    <span class="card-value" id="totalOpens">--</span>
                </div>
                <div class="chart-container">
                    <canvas id="totalOpensChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">活跃设备数</span>
                    <span class="card-value" id="uniqueDevices">--</span>
                </div>
                <div class="chart-container">
                    <canvas id="devicesChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Android版本分布</span>
                    <span class="card-value" id="androidVersions">--</span>
                </div>
                <div class="chart-container">
                    <canvas id="androidChart"></canvas>
                </div>
            </div>
            
            <div class="card geo-card">
                <div class="card-header">
                    <span class="card-title">地理位置分布</span>
                    <span class="card-value" id="uniqueLocations">--</span>
                </div>
                <div class="chart-container">
                    <canvas id="geoChart"></canvas>
                </div>
                <div class="map-container" id="mapContainer">
                    <!-- 地图将通过JavaScript动态加载 -->
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <span class="card-title">设备使用趋势</span>
            </div>
            <div class="chart-container" style="height: 350px;">
                <canvas id="trendChart"></canvas>
            </div>
        </div>
        
        <div class="data-table">
            <table id="statsTable">
                <thead>
                    <tr>
                        <th>日期</th>
                        <th>设备ID</th>
                        <th>开启次数</th>
                        <th>设备型号</th>
                        <th>Android版本</th>
                        <th>IP地址</th>
                        <th>地理位置</th>
                        <th>制造商</th>
                        <th>报告时间</th>
                        <th>状态</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="10" class="loading">数据加载中...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- IP信息弹窗 -->
    <div class="ip-modal" id="ipModal">
        <div class="ip-modal-content">
            <div class="ip-modal-header">
                <div class="ip-modal-title">IP地址详细信息</div>
                <div class="ip-modal-close" id="ipModalClose">&times;</div>
            </div>
            <div class="ip-details" id="ipDetails">
                <!-- IP详细信息将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="http://raw.githack.com/nspron/DuolingoKill/main/docs/script.js"></script>
</body>
</html>
